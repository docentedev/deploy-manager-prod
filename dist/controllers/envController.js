/* claudio.dcv@gmail.com */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateEnv=exports.renderEnvPage=void 0;const e=require("../services/envService"),n=async(n,r)=>{const a=await(0,e.getEnvConfiguration)(),t=a?a.variables:{},s=a?a.fileName:"";r.render("envs/env",{envVariables:t,fileName:s})};exports.renderEnvPage=n;const r=async(n,r)=>{const{fileName:a,newKey:t=[],newValue:s=[],...i}=n.body,v=t.reduce(((e,n,r)=>(n&&(e[n]=s[r]||""),e)),{}),o=Object.entries({...i,...v}).map((([e,n])=>({key:e,value:String(n)})));await(0,e.saveEnvConfiguration)(a,o),r.redirect("/env")};exports.updateEnv=r;